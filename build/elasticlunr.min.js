!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"elasticlunr",(function(){return re}));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"getDocumentStore",value:function(){throw Error("getDocumentStore() must be defined")}},{key:"add",value:function(e){throw Error("This index does not support adding documents")}},{key:"remove",value:function(e){throw Error("This index does not support removal of documents")}},{key:"all",value:function(){return this.getDocumentStore().all()}},{key:"getRef",value:function(){throw Error("getRef must be implemented")}},{key:"getFields",value:function(){throw Error("getFields() must be implemented")}},{key:"getField",value:function(e){throw Error("getField() must be implemented")}},{key:"analyze",value:function(e,t){throw Error("The analyze(field, str) method must be implemented. This must return tokens for the given string.")}},{key:"terms",value:function(e){throw Error("The terms(query) method must be implemented.")}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],u=!0,s=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){s=!0,i=e}finally{try{u||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function b(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e,t){var n,r=g(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.indexOf(i)<0&&e.push(i)}}catch(e){r.e(e)}finally{r.f()}return e},k=function(){function e(t,n){m(this,e),this.token=t,this.metadata=n||{}}return v(e,[{key:"update",value:function(e){var t=e(this.token,this.metadata);return Array.isArray(t)&&2===t.length?(this.token=t[0],this.metadata=d(d({},this.metadata),t[1]),this):(this.token=t,this)}},{key:"getPosition",value:function(){return this.metadata.start&&this.metadata.end?[this.metadata.start,this.metadata.end]:null}},{key:"toString",value:function(){return this.token}},{key:"term",value:function(){return this.toString()}}]),e}(),S=function(){function e(t){m(this,e),t.pipeline&&this.setPipeline(t.pipeline),t.queryPipeline&&this.setQueryPipeline(t.queryPipeline),this.storePositions=t.storePositions||!1,this._terms={},this._documents={},t.storeDocuments&&(this._store=!0),this._tf={},this._idf={},this._flnorm=1,this._ids=[]}return v(e,[{key:"termFrequency",value:function(e){return this._tf[e]}},{key:"hasToken",value:function(e){return this._idf[e]>0}},{key:"allTokens",value:function(){var e=this;return Object.keys(this._terms).map((function(t){return{term:t,tf:e._tf[t],terms:e._terms[t],idf:e._idf[t],norm:e._flnorm,documents:Object.keys(e._tf[t]||{})}}))}},{key:"getToken",value:function(e){return this._idf[e]?{term:e,tf:this._tf[e],idf:this._idf[e],norm:this._flnorm,documents:Object.keys(this._tf[e]||{})}:null}},{key:"setToken",value:function(e,t){for(var n=[],r=0,i=Object.entries(t);r<i.length;r++){var o=c(i[r],2),u=o[0],s=o[1],a=s.tf,f=Math.pow(a,2);f<1?(delete this._terms[e][u],delete this._tf[e][u],n.indexOf(u)<0&&n.push(u)):(this._terms[e]||(this._terms[e]={}),this._terms[e][u]={positions:s.positions||[],total:f},this._tf[e]||(this._tf[e]={}),this._tf[e][u]=a,this._ids.indexOf(u)<0&&this._ids.push(u))}this.recalculateIDF()}},{key:"highlight",value:function(e,t){if(!this._documents[e])throw Error("Document not found: ".concat(e));var n=this._documents[e],r=t.sort((function(e,t){return e[0]-t[0]})).reduce((function(e,t){return e.length?t[0]>e[e.length-1][0]?(e.push(t),e):(t[1]>e[e.length-1][0]&&(e[e.length-1][1]=t[1]),e):(e.push(t),e)}),[]).sort((function(e,t){return e[0]-t[0]}));return function(e,t){for(var i=[],o=0;o<r.length;o++)i.push(n.substring(0===o?0:r[o-1][1],r[o][0])),i.push(e),i.push(n.substring(r[o][0],r[o][1])),i.push(t);return r.length>0&&i.push(n.substring(r[r.length-1][1])),i.join("")}}},{key:"terms",value:function(e){var t=this,n={},r=e.fuzziness||0,i=e.minimum_should_match||1;return e.terms.forEach((function(i){if(i instanceof RegExp)Object.keys(t._terms).filter((function(e){return i.test(e)})).map((function(r){var i=Object.keys(t._terms[r]);(e.docs?i.filter((function(t){return e.docs.indexOf(t)>=0})):i).forEach((function(e){n[e]||(n[e]=[]),n[e].push({ref:e,positions:t._terms[r][e].positions,tf:t._tf[r][e],idf:t._idf[r],norm:t._flnorm,content:t._store&&t._documents[e]?t._documents[e]:null})}))}));else if(0===r&&t._terms[i]){var o=Object.keys(t._terms[i]);(e.docs?o.filter((function(t){return e.docs.indexOf(t)>=0})):o).forEach((function(e){n[e]||(n[e]=[]),n[e].push({ref:e,positions:t._terms[i][e].positions,tf:t._tf[i][e],idf:t._idf[i],norm:t._flnorm,content:t._store&&t._documents[e]?t._documents[e]:null})}))}if(r>0)for(var u=function(){var o=a[s];if(function(e,t){for(var n=Array(t.length+1).fill(null).map((function(){return Array(e.length+1).fill(null)})),r=0;r<=e.length;r+=1)n[0][r]=r;for(var i=0;i<=t.length;i+=1)n[i][0]=i;for(var o=1;o<=t.length;o+=1)for(var u=1;u<=e.length;u+=1){var s=e[u-1]===t[o-1]?0:1;n[o][u]=Math.min(n[o][u-1]+1,n[o-1][u]+1,n[o-1][u-1]+s)}return n[t.length][e.length]}(o,i)<=r){var u=Object.keys(t._terms[o]);(e.docs?u.filter((function(t){return e.docs.indexOf(t)>=0})):u).forEach((function(e){n[e]||(n[e]=[]),n[e].push({ref:e,positions:t._terms[o][e].positions,tf:t._tf[o][e],idf:t._idf[o],norm:t._flnorm,content:t._store&&t._documents[e]?t._documents[e]:null})}))}},s=0,a=Object.keys(t._terms);s<a.length;s++)u()})),i<=1?n:Object.entries(n).filter((function(t){var n=c(t,2);n[0];return n[1].length>=e.minimum_should_match})).reduce((function(e,t){return e[t[0]]=t[1],e}),{})}},{key:"toJSON",value:function(){return{pipeline:this.pipeline,documents:this._documents,store:{positions:this.storePositions,documents:this._store}}}},{key:"all",value:function(){return this._ids}},{key:"update",value:function(e){var t=this,n=e.filter((function(e){return t._ids.indexOf(e.id)>=0})).map((function(e){return e.id}));return w(w([],this.remove(n)),this.add(e))}},{key:"recalculateIDF",value:function(){var e=this;this._flnorm=1/Math.sqrt(Object.keys(this._terms).length),Object.keys(this._terms).forEach((function(t){e._idf[t]=1+Math.log10(e._ids.length/(Object.keys(e._terms[t]).length+1))}))}},{key:"add",value:function(e){var t,n=this,r=[],i=g(e);try{var o=function(){var e=t.value;if(n._ids.indexOf(e.id)>=0)throw Error("Document id ".concat(e.id," already exists in the index"));r.push(e.id),n._store&&(n._documents[e.id]=e.content),n._ids.push(e.id);var i=n.pipeline.run(e.content);Array.isArray(i)||(i=[i]),i.forEach((function(t){"string"==typeof t&&(t=new k(t));var r=t.toString();if(n._terms[r]||(n._terms[r]={}),n._terms[r][e.id]||(n._terms[r][e.id]={positions:[],total:0}),t instanceof k){var i=t.getPosition();i&&n._terms[r][e.id].positions.push(i)}n._terms[r][e.id].total++,n._tf[r]||(n._tf[r]={}),n._tf[r][e.id]=Math.sqrt(n._terms[r][e.id].total)}))};for(i.s();!(t=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}return this.recalculateIDF(),r}},{key:"remove",value:function(e){var t=this,n=[];return e.forEach((function(e){t._documents[e]&&n.push(e),delete t._documents[e];var r=t._ids.indexOf(e);r>=0&&t._ids.splice(r,1);for(var i=0,o=Object.keys(t._terms);i<o.length;i++){var u=o[i];t._terms[u][e]&&(delete t._terms[u][e],delete t._tf[u][e],0===Object.keys(t._terms[u]).length&&(delete t._terms[u],delete t._tf[u],delete t._idf[u]))}})),this.recalculateIDF(),n}},{key:"setPipeline",value:function(e){this.pipeline=e}},{key:"setQueryPipeline",value:function(e){this.queryPipeline=e}},{key:"analyze",value:function(e,t){return t&&t.isQuery&&this.queryPipeline?this.queryPipeline.run(e):this.pipeline.run(e)}}]),e}(),O=function(){function e(t){m(this,e),this.inner=t,this.length=0}return v(e,[{key:"size",value:function(){return this.length}},{key:"updateLength",value:function(){var e=this;this.length=this.inner.getFields().map((function(t){return e.inner.getField(t)._ids.length})).reduce((function(e,t){return t>e?t:e}),0)}}]),e}(),j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(n,e);var t=s(n);function n(e){var r;return m(this,n),(r=t.call(this,e))._fields=e.fields||{},r._ref=e._ref||"id",r.emitter=e.emitter,r.storePositions=e.storePositions||!1,r.storeDocuments=e.storeDocuments||!1,r._fields[r._ref]=new S({pipeline:{run:function(e){return[e]}}}),r.documentStore=new O(f(r)),r.pipeline=e.pipeline,r}return v(n,[{key:"highlight",value:function(e,t){var n=this,r=Object.entries(t).filter((function(e){var t=c(e,2),r=t[0];t[1];return!!n._fields[r]})).map((function(t){var r=c(t,2),i=r[0],o=r[1];return[i,n._fields[i].highlight(e,o)]}));return function(e,t){var n={};return r.forEach((function(r){var i=c(r,2),o=i[0],u=i[1];n[o]=u(e,t)})),n}}},{key:"_load",value:function(e){var t=this,n=[];e.fields.forEach((function(e){n.push(e.name),t.addField(e.name,e.settings||{}),e.settings&&e.settings.store&&e.settings.store.documents&&(t.getField(e.name)._documents=e.settings.documents)})),Object.entries(e.index).forEach((function(e){var r=c(e,2),i=r[0];r[1].forEach((function(e){var r=n[e[0]],o={};Object.entries(e[1].tf).forEach((function(e){var t=c(e,2),n=t[0],r=t[1];o[n]||(o[n]={}),o[n].tf=r})),Object.entries(e[1].p).forEach((function(e){var t=c(e,2),n=t[0],r=t[1];o[n]||(o[n]={}),r.positions&&(o[n].positions=r.positions)})),t.getField(r).setToken(i,o)}))}))}},{key:"_legacyLoad",value:function(e){var t=this,n=e.documentStore.save||!1;e&&e.pipeline&&(this.pipeline=e.pipeline),e.fields.forEach((function(e){t.addField(e.name,{storeDocuments:n})})),"id"!==e.ref&&this.newRef(e.ref);for(var r=function e(t,n,r){for(var i=0,o=Object.keys(r);i<o.length;i++){var u=o[i];if("df"!==u)if("docs"!==u)e(t,n+u,r[u]);else for(var s=0,a=Object.entries(r[u]);s<a.length;s++){var f=c(a[s],2)[1];t.setToken(n,{tf:f.tf})}}},i=0,o=Object.entries(e.index);i<o.length;i++){var u=c(o[i],2),s=u[0],a=u[1];a.root&&r(this._fields[s],"",a.root)}}},{key:"getFields",value:function(){return Object.keys(this._fields)}},{key:"toJSON",value:function(){var e=[],t={};return Object.entries(this._fields).forEach((function(n){var r=c(n,2),i=r[0],o=r[1];e.push({name:i,settings:o.toJSON()});var u=e.length-1;o.allTokens().forEach((function(e){t[e.term]||(t[e.term]=[]),t[e.term].push([u,{tf:e.tf,idf:e.idf,p:e.terms}])}))})),{fields:e,ref:this._ref,index:t,pipeline:this.pipeline.toJSON(),version:"1.0.0"}}},{key:"getRef",value:function(){return this._ref}},{key:"update",value:function(e,t){var n=this,r=[];return e.forEach((function(e){var t=e[n._ref];Object.entries(e).forEach((function(e){var i=c(e,2),o=i[0],u=i[1];n._fields[o]&&(r=w(r,n._fields[o].update([{id:t,content:u}])))}))})),this.emitter&&!1!==t&&e.filter((function(e){return r.indexOf(e[n._ref])>=0})).map((function(e){return n.emitter.emit("update",e,n)})),this.documentStore.updateLength(),!0}},{key:"add",value:function(e,t){var n=this,r=[];return e.forEach((function(e){var t=e[n._ref];Object.entries(e).forEach((function(e){var i=c(e,2),o=i[0],u=i[1];n._fields[o]&&(r=w(r,n._fields[o].add([{id:t,content:u}])))}))})),this.emitter&&!1!==t&&e.filter((function(e){return r.indexOf(e[n._ref])>=0})).map((function(e){return n.emitter.emit("add",e,n)})),this.documentStore.updateLength(),!0}},{key:"reindex",value:function(){}},{key:"remove",value:function(e,t){var n=this,r=Object.values(this._fields).reduce((function(t,n){return w(t,n.remove(e))}),[]);return this.emitter&&!1!==t&&r.forEach((function(e){return n.emitter.emit("remove",e,n)})),this.documentStore.updateLength(),!0}},{key:"addField",value:function(e,t){var n={};return t=t||{},n.pipeline=t.pipeline||this.pipeline,n.storeDocuments=t.storeDocuments||this.storeDocuments,n.storePositions=!0,this._fields[e]=new S(n),this}},{key:"getField",value:function(e){return this._fields[e]}},{key:"removeField",value:function(e){delete this._fields[e]}},{key:"setRef",value:function(e){if(!this._fields[e])throw Error("Unknown field ".concat(e));return this._ref=e,this.reindex()}},{key:"newRef",value:function(e){this.removeField(this._ref),this._fields[e]=new S({pipeline:{run:function(e){return[e]}}}),this.setRef(e)}},{key:"all",value:function(){return this._fields[this._ref].all()}},{key:"analyze",value:function(e,t,n){return this._fields[e].analyze(t,n)}},{key:"terms",value:function(e){return this._fields[e.field].terms(e)}}]),n}(i);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],u=!0,s=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){s=!0,i=e}finally{try{u||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}function D(e,t){return(D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var i=C(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var $=new(function(){function e(t){q(this,e),this.queries=t||{}}return T(e,[{key:"parse",value:function(e,t,n){if(!this.queries[e])throw Error("Unknown query type ".concat(e));return this.queries[e](this,t,n)}},{key:"register",value:function(e,t){this.queries[e]=t}}]),e}()),W=function(){function e(){q(this,e)}return T(e,[{key:"filter",value:function(e,t){return this.score(e,t).filter((function(e){e.id;return e.score>0}))}},{key:"score",value:function(e,t){throw Error("Please extend the score() method")}},{key:"rewrite",value:function(e){return this}}]),e}(),L=function(e){z(n,e);var t=A(n);function n(e){var r;return q(this,n),(r=t.call(this,e)).inner=e,r}return T(n,[{key:"score",value:function(e,t){var n=e.all(t),r=this.inner.score(e,t).map((function(e){return e.ref}));return n.filter((function(e){return r.indexOf(e)<0})).map((function(e){return{ref:e,score:1}}))}}]),n}(W);$.register("not",(function(e,t,n){var r=Object.keys(t);if(!r||!r[0])throw Error("A not query must have a query type as root element");return new L($.parse(r[0],t[r[0]],t))}));var M=function(e){z(n,e);var t=A(n);function n(e){var r;return q(this,n),(r=t.call(this,e)).should=e.should||[],r.must=e.must||!1,r.must_not=e.must_not||!1,r.filter=e.filter,r.minimum_should_match=e.minimum_should_match||1,r}return T(n,[{key:"rewrite",value:function(e){var t=this.filter||[],r=new n({should:(this.should||[]).map((function(t){return t.rewrite(e)})),must:!!this.must&&this.must.rewrite(e),minimum_should_match:this.minimum_should_match});return this.must_not&&t.push(new L(this.must_not.rewrite(e))),t&&t.length&&(r.filter=t.map((function(t){return t.rewrite(e)}))),r}},{key:"score",value:function(e,t,n){var r=this;if(!n)return this.rewrite(e).score(e,t,!0);var i=!1;this.filter&&this.filter.length&&(i=this.filter.reduce((function(t,n){var r=!1!==t?{filtered:t.map((function(e){return e.ref}))}:{};return n.filter(e,r)}),i));var o={};if(this.must){var u=!1!==i?{filtered:i.map((function(e){return e.ref}))}:{};i=this.must.score(e,u)}var s={};return!1!==i&&(s.filtered=[],i.forEach((function(e){s.filtered.push(e.ref),o[e.ref]={ref:e.ref,positions:[],score:e.score||0,matched:0}}))),this.should.reduce((function(t,n){return n.score(e,t).forEach((function(e){o[e.ref]||(o[e.ref]={ref:e.ref,positions:{},score:0,matched:0}),Object.entries(e.positions).forEach((function(t){var n=P(t,2),r=n[0],i=n[1];o[e.ref].positions[r]||(o[e.ref].positions[r]=[]),i.forEach((function(t){return o[e.ref].positions[r].push(t)}))})),o[e.ref].score+=e.score,o[e.ref].matched++})),t}),s),Object.entries(o).map((function(e){return e[1]})).filter((function(e){return e.matched>=r.minimum_should_match&&e.score>0}))}}]),n}(W);$.register("bool",(function(e,t,n){var r={};if(t.should&&(r.should=t.should.map((function(t){var n=Object.keys(t);return n&&n[0]?e.parse(n[0],t[n[0]],t):e.parse("match_all",{})}))),t.filter&&(r.filter=t.filter.map((function(t){var n=Object.keys(t);return n&&n[0]?e.parse(n[0],t[n[0]],t):e.parse("match_all",{})}))),t.must){var i=Object.keys(t.must);i&&i[0]&&(r.must=e.parse(i[0],t.must[i[0]],t.must))}if(t.must_not){var o=Object.keys(t.must_not);o&&o[0]&&(r.must_not=e.parse(o[0],t.must_not[o[0]],t.must_not))}return t.minimum_should_match&&t.minimum_should_match<=r.should.length&&(r.minimum_should_match=t.minimum_should_match),new M(r)}));var N=function(e){z(n,e);var t=A(n);function n(e){var r;return q(this,n),(r=t.call(this,e)).minimum_should_match=e.minimum_should_match||1,r.expand=!!e.expand,r.field=e.field||"",r.terms=e.terms||[],r.boost=e.boost||1,r.fuzziness=e.fuzziness||0,Array.isArray(r.terms)||(r.terms=[r.terms]),r}return T(n,[{key:"score",value:function(e,t){t||(t={});var n={field:this.field,terms:this.expand?this.terms.map((function(e){return new RegExp("^"+e+".*")})):this.terms,fuzziness:this.fuzziness,minimum_should_match:this.minimum_should_match};t.filtered&&(n.docs=(t||{}).filtered);for(var r=e.terms(n),i=[],o=0,u=Object.keys(r);o<u.length;o++){var s=u[o],a=r[s].map((function(e){return[e.tf*Math.pow(e.idf,2)*e.norm,e]})).reduce((function(e,t){return t[0]>e[0]?t:e}),[0,void 0]);i.push({ref:s,field:this.field,positions:E({},this.field,a[1].positions),score:a[0]*this.boost})}return i}}]),n}(W),U=function(e){z(n,e);var t=A(n);function n(e){var r;return q(this,n),(r=t.call(this,e)).boost=e.boost||1,r}return T(n,[{key:"score",value:function(e,t){var n=this;return e.all().map((function(e){return{ref:e,score:n.boost}}))}}]),n}(W),J=function(e){z(n,e);var t=A(n);function n(e){var r;return q(this,n),(r=t.call(this,e)).expand=!!e.expand,r.field=e.field||"",r.query=e.query||"",r.boost=e.boost||1,r.fuzziness=e.fuzziness||0,r.minMatch=void 0!==e.minimum_must_match?e.minimum_must_match:1,r.operator="and"===e.operator?"and":"or",r}return T(n,[{key:"score",value:function(e,t){return this.rewrite(e).score(e,t)}},{key:"rewrite",value:function(e){var t=e.analyze(this.field,this.query,{isQuery:!0});return Array.isArray(t)||(t=[t]),t.length>1?new N({field:this.field,expand:this.expand,terms:t,fuzziness:this.fuzziness,boost:this.boost,minimum_should_match:"and"===this.operator&&0===this.minMatch?t.length:this.minMatch}):1===t.length?new N({field:this.field,expand:this.expand,terms:[t[0].toString()],fuzziness:this.fuzziness,boost:this.boost}):new U({})}}]),n}(W);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],u=!0,s=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){s=!0,i=e}finally{try{u||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}$.register("match",(function(e,t,n){var r=Object.entries(t).filter((function(e){return["fuzziness","operator"].indexOf(e[0])<0}));return 0===r.length?e.parse("match_all",{},{}):r.length>1?e.parse("bool",{should:r.map((function(e){var r,i=P(e,2);return{match:(r={},E(r,i[0],i[1]),E(r,"fuzziness",t.fuzziness),E(r,"operator",t.operator),r),expand:!!n.expand}})),minimum_should_match:t&&t.operator&&"string"==typeof t.operator&&"and"===t.operator.toLowerCase()?r.length:1}):new J({field:r[0][0],query:r[0][1],fuzziness:t.fuzziness,expand:!!n.expand,operator:t&&t.operator&&"string"==typeof t.operator&&"and"===t.operator.toLowerCase()?"and":"or",minimum_must_match:t&&t.operator&&"string"==typeof t.operator&&"and"===t.operator.toLowerCase()?0:1})})),$.register("terms",(function(e,t){var n=Object.entries(t);return 0===n.length?e.parse("match_all",{},{}):n.length>1?e.parse("bool",{should:n.map((function(e){var t=P(e,2);return{terms:E({},t[0],t[1])}}))}):new N({field:n[0][0],terms:n[0][1]})})),$.register("match_all",(function(e,t){return new U({boost:t.boost||1})}));var K=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t instanceof i))throw Error("The object provided must be an instance of the index interface");this.inner=t,this.eslunr=n.elasticlunr,this.defaultPipeline=this.inner.pipeline,this.documentStore=this.inner.documentStore}var t,n,r;return t=e,(n=[{key:"getRef",value:function(){return this.inner.getRef()}},{key:"saveDocument",value:function(e){for(var t=0,n=Object.values(this.inner._fields);t<n.length;t++)n[t]._store=e}},{key:"toJSON",value:function(){return this.inner.toJSON()}},{key:"on",value:function(){return this.inner.emitter.addListener.apply(this.inner.emitter,arguments)}},{key:"load",value:function(e){var t=this;if("1.0.0"===e.version){if(e.fields)for(var n=function(n){e.fields[n]&&e.fields[n].settings&&e.fields[n].settings.pipeline&&Array.isArray(e.fields[n].settings.pipeline)?e.fields[n].settings.pipeline.length>0?function(t){var r=new t.Pipeline;e.fields[n].settings.pipeline.forEach((function(e){var n=t.Pipeline.getRegisteredFunction(e);if(!n)throw new Error("Cannot load un-registered function: "+e);r.add(n)}));var i=new Proxy(r,{get:function(e,n,r){var i=e[n];return"function"!=typeof i||"run"!==n?i:function(){return i.call(this,t.tokenizer(arguments[0]))}}});e.fields[n].settings.pipeline=i}(t.eslunr):e.fields[n].settings.pipeline=t.defaultPipeline:delete e.fields[n].settings.pipeline},r=0;r<e.fields.length;r++)n(r);this.inner._load(e)}else e&&e.pipeline&&(e.pipeline=this.eslunr.Pipeline.load(e.pipeline)),this.inner._legacyLoad(e);return this}},{key:"off",value:function(){return this.inner.emitter.removeListener.apply(this.inner.emitter,arguments)}},{key:"setRef",value:function(e){return this.inner.setRef(e)}},{key:"addDoc",value:function(e,t){return this.inner.add([e],t)}},{key:"add",value:function(e){return this.addDoc(e)}},{key:"elasticsearch",value:function(e){if(!e||!e.query)throw Error("Root object must have a query element");var t=e.query,n=Object.entries(t);return $.parse(n[0][0],n[0][1],t).score(this.inner).sort((function(e,t){return e.score<t.score}))}},{key:"highlight",value:function(e,t){return this.inner.highlight(e,t)}},{key:"search",value:function(e,t){var n=this;if(!e)return[];if("string"==typeof e){if(!t||"object"!==V(t))return this.elasticsearch({query:{bool:{should:this.inner.getFields().filter((function(e){return e!==n.inner.getRef()})).map((function(t){return{match:Q({},t,e)}}))}}});if(t.fields)return this.elasticsearch({query:{bool:{should:this.inner.getFields().filter((function(e){return e!==n.inner.getRef()&&t.fields[e]&&t.fields[e].boost>0})).map((function(n){return{match:Q({},n,e),boost:t.fields[n].boost}}))}}})}if("object"===V(e)&&!e.query){if(!t)return this.search(e,{operator:"OR"});var r=Object.entries(e);return this.elasticsearch({query:{bool:{should:r.map((function(e){var n,r=B(e,2);return{match:(n={},Q(n,r[0],r[1]),Q(n,"operator",t&&t.bool&&"and"===t.bool.toLowerCase()?"and":"or"),n),expand:!(!t||!t.expand)}}))}}})}return this.elasticsearch(e)}},{key:"updateDoc",value:function(e,t){return this.inner.update([e],t)}},{key:"removeDoc",value:function(e,t){var n=this.getRef();return e&&e[n]?this.inner.remove([e[n]],t):null}},{key:"removeDocByRef",value:function(e,t){this.inner.remove([e],t)}},{key:"use",value:function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)}},{key:"getFields",value:function(){return this.inner.getFields()}},{key:"getField",value:function(e){return this.inner.getField(e)}},{key:"addField",value:function(e){return this.inner.addField(e)}},{key:"field",value:function(e){return this.addField(e)}}])&&G(t.prototype,n),r&&G(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function X(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elasticlunr=t,this.knownVersions=[],this.components={}}var t,n,r;return t=e,(n=[{key:"registerComponent",value:function(e,t){this.components[e]=t}},{key:"register",value:function(e,t,n){this.knownVersions.push({version:e,generator:t,default:n})}},{key:"loadComponent",value:function(e){return this.components[e]?this.components[e](this):null}},{key:"loadIndex",value:function(e){if(!e.version)throw Error("No index version provided. Are you sure this is an elasticlunr index?");var t,n=X(this.knownVersions);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("string"==typeof r.version&&e.version===r.version)return r.generator(this).load(e);if(r.version instanceof RegExp&&r.version.test(e.version))return r.generator(this).load(e)}}catch(e){n.e(e)}finally{n.f()}throw Error("Unknown index version ".concat(e.version))}},{key:"createDefault",value:function(){var e,t=X(this.knownVersions);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.default)return n.generator(this)}}catch(e){t.e(e)}finally{t.f()}return null}}])&&Z(t.prototype,n),r&&Z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var re=function e(t){var n=e.Index();return n.pipeline.add(e.trimmer,e.stopWordFilter,e.stemmer),t&&t.call(n,n),n};[function(e){var t;e.utils={},e.utils.warn=(t=this,function(e){t&&t.console&&t.console.warn&&t.console.warn(e)}),e.utils.toString=function(e){return null==e?"":e.toString()}},function(e){var t=new ee(e),n=function(e){return function(t){var n=new e.Pipeline,r=new Proxy(n,{get:function(t,n,r){var i=t[n];return"function"!=typeof i||"run"!==n?i:function(){return i.call(this,e.tokenizer(arguments[0]))}}}),i=new K(new j({storePositions:!0,emitter:new e.EventEmitter,storeDocuments:!0,pipeline:r}),{elasticlunr:e,pipeline:r});return i.pipeline=r,i}}(e);t.register(new RegExp("^(0.9|1.0)"),(function(e){return n(e)}),!0);var r=function(){return t.createDefault()};r.load=function(e){return t.loadIndex(e)},r.registerComponent=function(e,n){return t.registerComponent(e,n)},r.register=function(e,n,r){return t.register(e,n,r)},e.Index=r,r.registerComponent("documentStore",(function(t){return new e.DocumentStore})),r.registerComponent("eventEmitter",(function(t){return new e.EventEmitter})),r.registerComponent("pipeline",(function(t){return new e.Pipeline}))},function(e){e.Configuration=function(t,n){var r;if(t=t||"",null==n)throw new Error("fields should not be null");if(this.config={},0===t.length)this.buildDefaultConfig(n);else try{r=JSON.parse(t),this.buildUserConfig(r,n)}catch(t){e.utils.warn("user configuration parse failed, will use default configuration"),this.buildDefaultConfig(n)}},e.Configuration.prototype.buildDefaultConfig=function(e){this.reset(),e.forEach((function(e){this.config[e]={boost:1,bool:"OR",expand:!1}}),this)},e.Configuration.prototype.buildUserConfig=function(t,n){var r,i,o,u="OR",s=!1;if(this.reset(),"bool"in t&&(u=t.bool||u),"expand"in t&&(s=t.expand||s),"fields"in t)for(r in t.fields)n.indexOf(r)>-1?(o=s,void 0!==(i=t.fields[r]).expand&&(o=i.expand),this.config[r]={boost:i.boost||0===i.boost?i.boost:1,bool:i.bool||u,expand:o}):e.utils.warn("field name in user configuration not found in index instance fields");else this.addAllFields2UserConfig(u,s,n)},e.Configuration.prototype.addAllFields2UserConfig=function(e,t,n){n.forEach((function(n){this.config[n]={boost:1,bool:e,expand:t}}),this)},e.Configuration.prototype.get=function(){return this.config},e.Configuration.prototype.reset=function(){this.config={}}},function(e){e.EventEmitter=function(){this.events={}},e.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");return n.forEach((function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)}),this),!0},e.EventEmitter.prototype.removeListener=function(e,t){var n;this.hasHandler(e)&&-1!==(n=this.events[e].indexOf(t))&&(this.events[e].splice(n,1),0===this.events[e].length&&delete this.events[e])},e.EventEmitter.prototype.emit=function(e){var t;this.hasHandler(e)&&(t=Array.prototype.slice.call(arguments,1),this.events[e].forEach((function(e){e.apply(void 0,t)}),this))},e.EventEmitter.prototype.hasHandler=function(e){return e in this.events}},function(e){e.Pipeline=function(){this._queue=[]},e.Pipeline.registeredFunctions={},e.Pipeline.registerFunction=function(t,n){n in e.Pipeline.registeredFunctions&&e.utils.warn("Overwriting existing registered function: "+n),t.label=n,e.Pipeline.registeredFunctions[n]=t},e.Pipeline.getRegisteredFunction=function(t){return t in e.Pipeline.registeredFunctions!=!0?null:e.Pipeline.registeredFunctions[t]},e.Pipeline.warnIfFunctionNotRegistered=function(t){t.label&&t.label in this.registeredFunctions||e.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",t)},e.Pipeline.load=function(t){var n=new e.Pipeline;return t.forEach((function(t){var r=e.Pipeline.getRegisteredFunction(t);if(!r)throw new Error("Cannot load un-registered function: "+t);n.add(r)})),n},e.Pipeline.prototype.add=function(){var t=Array.prototype.slice.call(arguments);t.forEach((function(t){e.Pipeline.warnIfFunctionNotRegistered(t),this._queue.push(t)}),this)},e.Pipeline.prototype.after=function(t,n){var r;if(e.Pipeline.warnIfFunctionNotRegistered(n),-1===(r=this._queue.indexOf(t)))throw new Error("Cannot find existingFn");this._queue.splice(r+1,0,n)},e.Pipeline.prototype.before=function(t,n){var r;if(e.Pipeline.warnIfFunctionNotRegistered(n),-1===(r=this._queue.indexOf(t)))throw new Error("Cannot find existingFn");this._queue.splice(r,0,n)},e.Pipeline.prototype.remove=function(e){var t=this._queue.indexOf(e);-1!==t&&this._queue.splice(t,1)},e.Pipeline.prototype.run=function(e){return this._queue.length?this._queue.reduce((function(e,t){return e.reduce((function(n,r,i){var o=t(r,i,e);return Array.isArray(o)||(o=[o]),o.filter((function(e){return null!=e})).forEach((function(e){n.push(e)})),n}),[]).filter((function(e){return""!==e}))}),e):e},e.Pipeline.prototype.reset=function(){this._queue=[]},e.Pipeline.prototype.get=function(){return this._queue},e.Pipeline.prototype.toJSON=function(){return this._queue.map((function(t){return e.Pipeline.warnIfFunctionNotRegistered(t),t.label}))}},function(e){e.DocumentStore=function(e){this.setDocStored(e),this.docs={},this.docInfo={},this.length=0},e.DocumentStore.load=function(e){var t=new this;return t.length=e.length,t.docs=e.docs,t.docInfo=e.docInfo,t._save=e.save,t},e.DocumentStore.prototype.resetStore=function(e){return this.docs={},this.docInfo={},this.length=0,this.setDocStored(e)},e.DocumentStore.prototype.setDocStored=function(e){return this._save=null==e||e,this._save},e.DocumentStore.prototype.isDocStored=function(){return this._save},e.DocumentStore.prototype.addDoc=function(e,t){this.hasDoc(e)||this.length++,!0===this._save?this.docs[e]=function(e){var t,n;if(null===e||"object"!==te(e))return e;for(n in t=e.constructor(),e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(t):this.docs[e]=null},e.DocumentStore.prototype.getDoc=function(e){return!1===this.hasDoc(e)?null:this.docs[e]},e.DocumentStore.prototype.hasDoc=function(e){return e in this.docs},e.DocumentStore.prototype.removeDoc=function(e){this.hasDoc(e)&&(delete this.docs[e],delete this.docInfo[e],this.length--)},e.DocumentStore.prototype.addFieldLength=function(e,t,n){null!=e&&!1!==this.hasDoc(e)&&(this.docInfo[e]||(this.docInfo[e]={}),this.docInfo[e][t]=n)},e.DocumentStore.prototype.updateFieldLength=function(e,t,n){null!=e&&!1!==this.hasDoc(e)&&this.addFieldLength(e,t,n)},e.DocumentStore.prototype.getFieldLength=function(e,t){return null==e?0:e in this.docs&&t in this.docInfo[e]?this.docInfo[e][t]:0},e.DocumentStore.prototype.toJSON=function(){return{docs:this.docs,docInfo:this.docInfo,length:this.length,save:this._save}}},function(e){e.SortedSet=function(){this.length=0,this.elements=[]},e.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},e.SortedSet.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t);this.length=this.elements.length},e.SortedSet.prototype.toArray=function(){return this.elements.slice()},e.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},e.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},e.SortedSet.prototype.indexOf=function(e){for(var t=0,n=this.elements.length,r=n-t,i=t+Math.floor(r/2),o=this.elements[i];r>1;){if(o===e)return i;o<e&&(t=i),o>e&&(n=i),r=n-t,i=t+Math.floor(r/2),o=this.elements[i]}return o===e?i:-1},e.SortedSet.prototype.locationFor=function(e){for(var t=0,n=this.elements.length,r=n-t,i=t+Math.floor(r/2),o=this.elements[i];r>1;)o<e&&(t=i),o>e&&(n=i),r=n-t,i=t+Math.floor(r/2),o=this.elements[i];return o>e?i:i+1},e.SortedSet.prototype.intersect=function(t){for(var n=new e.SortedSet,r=0,i=0,o=this.length,u=t.length,s=this.elements,a=t.elements;!(r>o-1||i>u-1);)s[r]!==a[i]?s[r]<a[i]?r++:s[r]>a[i]&&i++:(n.add(s[r]),r++,i++);return n},e.SortedSet.prototype.clone=function(){var t=new e.SortedSet;return t.elements=this.toArray(),t.length=t.elements.length,t},e.SortedSet.prototype.union=function(e){var t,n,r,i,o;for(this.length>=e.length?(t=this,n=e):(t=e,n=this),r=t.clone(),i=0,o=n.toArray();i<o.length;i++)r.add(o[i]);return r},e.SortedSet.prototype.toJSON=function(){return this.toArray()}},function(e){e.tokenizer=function(t){if(!t)return[];if(Array.isArray(t))throw Error("This operation does not make sense");return function(t){var n,r=[],i=0;for(t=t.toString(),e.tokenizer.seperator.lastIndex=0;i<t.length;){if(!(n=e.tokenizer.seperator.exec(t))){r.push(new k(t.substring(i).trim().toLowerCase(),{start:i,end:t.length}));break}n.index>i&&r.push(new k(t.substring(i,n.index).trim().toLowerCase(),{start:i,end:n.index})),i=n.index+n[0].length}return r}(t)},e.tokenizer.defaultSeperator=/[\s\-]+/g,e.tokenizer.seperator=e.tokenizer.defaultSeperator,e.tokenizer.setSeperator=function(t){null!=t&&"object"===ne(t)&&(e.tokenizer.seperator=t)},e.tokenizer.resetSeperator=function(){e.tokenizer.seperator=e.tokenizer.defaultSeperator},e.tokenizer.getSeperator=function(){return e.tokenizer.seperator}},function(e){var t,n,r,i,o,u,s,a,f,l,c,h,d,p,m,y,v,g,b,_,w,k,S,O;e.stemmer=(t={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},n={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},r="[aeiouy]",i="[^aeiou][^aeiouy]*",o=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),u=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),s=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),a=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),f=/^(.+?)(ss|i)es$/,l=/^(.+?)([^s])s$/,c=/^(.+?)eed$/,h=/^(.+?)(ed|ing)$/,d=/.$/,p=/(at|bl|iz)$/,m=new RegExp("([^aeiouylsz])\\1$"),y=new RegExp("^"+i+r+"[^aeiouwxy]$"),v=/^(.+?[^aeiou])y$/,g=new RegExp("^(.+?)("+Object.keys(t).join("|")+")$"),b=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,_=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,w=/^(.+?)(s|t)(ion)$/,k=/^(.+?)e$/,S=/ll$/,O=new RegExp("^"+i+r+"[^aeiouwxy]$"),function(e){var r,i,j,x,E,P,F,z,D=e.toString();return D.length<3?D:("y"===(j=D.substr(0,1))&&(D=j.toUpperCase()+D.substr(1)),E=l,(x=f).test(D)?D=D.replace(x,"$1$2"):E.test(D)&&(D=D.replace(E,"$1$2")),E=h,(x=c).test(D)?(z=x.exec(D),(x=o).test(z[1])&&(x=d,D=D.replace(x,""))):E.test(D)&&(r=(z=E.exec(D))[1],(E=a).test(r)&&(P=m,F=y,(E=p).test(D=r)?D+="e":P.test(D)?(x=d,D=D.replace(x,"")):F.test(D)&&(D+="e"))),(x=v).test(D)&&(r=(z=x.exec(D))[1],D=r+"i"),(x=g).test(D)&&(r=(z=x.exec(D))[1],i=z[2],(x=o).test(r)&&(D=r+t[i])),(x=b).test(D)&&(r=(z=x.exec(D))[1],i=z[2],(x=o).test(r)&&(D=r+n[i])),E=w,(x=_).test(D)?(r=(z=x.exec(D))[1],(x=u).test(r)&&(D=r)):E.test(D)&&(r=(z=E.exec(D))[1]+z[2],(E=u).test(r)&&(D=r)),(x=k).test(D)&&(r=(z=x.exec(D))[1],E=s,P=O,((x=u).test(r)||E.test(r)&&!P.test(r))&&(D=r)),E=u,(x=S).test(D)&&E.test(D)&&(x=d,D=D.replace(x,"")),"y"===j&&(D=j.toLowerCase()+D.substr(1)),e.update((function(e){return D})))}),e.Pipeline.registerFunction(e.stemmer,"stemmer")},function(e){return e.generateStopWordFilter=function(e){var t=e.reduce((function(e,t){return e[t]=t,e}),{});return function(e){return e&&t[e.toString()]!==e.toString()?e:null}},e.stopWordFilter=function(t){return t&&!0!==e.stopWordFilter.stopWords[t]?t:null},e.clearStopWords=function(){e.stopWordFilter.stopWords={}},e.addStopWords=function(t){null!=t&&!1!==Array.isArray(t)&&t.forEach((function(t){e.stopWordFilter.stopWords[t]=!0}),this)},e.resetStopWords=function(){e.stopWordFilter.stopWords=e.defaultStopWords},e.defaultStopWords={"":!0,a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,do:!0,does:!0,either:!0,else:!0,ever:!0,every:!0,for:!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,if:!0,in:!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,this:!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,while:!0,who:!0,whom:!0,why:!0,will:!0,with:!0,would:!0,yet:!0,you:!0,your:!0},e.stopWordFilter.stopWords=e.defaultStopWords,e.Pipeline.registerFunction(e.stopWordFilter,"stopWordFilter")},function(e){e.trimmer=function(e){var t=e.toString();if(null==t)throw new Error("token should not be undefined");return e.update((function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")}))},e.Pipeline.registerFunction(e.trimmer,"trimmer")}].forEach((function(e){e(re)}))}])}));